<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Do what you want to do !"><meta name="keywords" content><meta name="author" content="GeYu"><meta name="copyright" content="GeYu"><title>Do not go gentle into that good night ~ | Yu's Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://images5.alphacoders.com/423/423529.jpg"></div><div class="author-info__name text-center">GeYu</div><div class="author-info__description text-center">Do what you want to do !</div><div class="follow-button"><a href="https://github.com/NUISTGY">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">æ–‡ç« </span><span class="pull-right">226</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">æ ‡ç­¾</span><span class="pull-right">83</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">åˆ†ç±»</span><span class="pull-right">46</span></a></div></div></div><nav id="nav" style="background-image: url(https://pic.syst.eu.org/WechatIMG8673.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Yu's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="site-info"><div id="site-title">Yu's Blog</div><div id="site-sub-title">Do not go gentle into that good night ~</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2022/12/19/Springä¸­æ³¨å†ŒBeançš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ/">Springä¸­æ³¨å†ŒBeançš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-12-19</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Spring/">Spring</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span><div class="content"><script src="/assets/js/APlayer.min.js"> </script><h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä½¿ç”¨Springæ¡†æ¶åï¼ŒBeanç»Ÿä¸€éƒ½äº¤ç»™IOCå®¹å™¨å»ç®¡ç†å’Œåˆ›å»ºï¼Œé‚£ä¹ˆå°†ä¸€ä¸ªå¯¹è±¡åŠ å…¥åˆ°Springå®¹å™¨ä¸­æœ‰å“ªäº›æ–¹å¼å‘¢ï¼Œä»Šå¤©æˆ‘ä»¬ç»“åˆå…·ä½“çš„ä»£ç æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p>
<h2 id="äºŒã€ç¬¬ä¸€ç§æ–¹å¼ï¼š-XMLé…ç½®æ–¹å¼"><a href="#äºŒã€ç¬¬ä¸€ç§æ–¹å¼ï¼š-XMLé…ç½®æ–¹å¼" class="headerlink" title="äºŒã€ç¬¬ä¸€ç§æ–¹å¼ï¼š XMLé…ç½®æ–¹å¼"></a>äºŒã€ç¬¬ä¸€ç§æ–¹å¼ï¼š XMLé…ç½®æ–¹å¼</h2><p>XMLé…ç½®çš„æ–¹å¼ï¼Œæ˜¯Springæœ€æ—©æ”¯æŒçš„æ–¹å¼ï¼Œä¸è¿‡ç°åœ¨XMLæ–¹å¼å·²ç»ç”¨çš„æ¯”è¾ƒå°‘äº†ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨åé¢çš„é…ç½®æ–¹å¼æ›¿ä»£äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">	   xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">	   xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"student"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.wsh.injectbean.method_01.Student"</span>/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸€ç§æ–¹å¼ï¼š XMLæ–‡ä»¶é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ClassPathXmlApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:spring-config.xml"</span>);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"student"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ç¬¬äºŒç§æ–¹å¼ï¼š-ä½¿ç”¨-Componentæ³¨è§£-ComponentScanåŒ…æ‰«ææ–¹å¼"><a href="#ä¸‰ã€ç¬¬äºŒç§æ–¹å¼ï¼š-ä½¿ç”¨-Componentæ³¨è§£-ComponentScanåŒ…æ‰«ææ–¹å¼" class="headerlink" title="ä¸‰ã€ç¬¬äºŒç§æ–¹å¼ï¼š ä½¿ç”¨@Componentæ³¨è§£ + @ComponentScanåŒ…æ‰«ææ–¹å¼"></a>ä¸‰ã€ç¬¬äºŒç§æ–¹å¼ï¼š ä½¿ç”¨@Componentæ³¨è§£ + @ComponentScanåŒ…æ‰«ææ–¹å¼</h2><p>ä¸ºäº†è§£å†³beanå¤ªå¤šæ—¶ï¼ŒXMLæ–‡ä»¶è¿‡å¤§ï¼Œä»è€Œå¯¼è‡´è†¨èƒ€ä¸å¥½ç»´æŠ¤çš„é—®é¢˜ã€‚åœ¨Spring2.5ä¸­å¼€å§‹æ”¯æŒï¼š@Componentã€@Repositoryã€@Serviceã€@Controllerç­‰æ³¨è§£å®šä¹‰beanã€‚@Componentæ”¾åœ¨ç±»åä¸Šé¢ï¼Œç„¶åé€šè¿‡@ComponentScanæŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼ŒSpringè¿›è¡Œæ‰«æå¸¦æœ‰@Componetæ³¨è§£çš„beanï¼Œç„¶ååŠ è‡³å®¹å™¨ä¸­ã€‚</p>
<p><strong>æ³¨æ„ï¼Œè¿™ç§æ–¹å¼ä¸å•å•æŒ‡çš„æ˜¯@Componentæ³¨è§£ï¼Œè¿˜åŒ…æ‹¬@Controlerã€@Serviceã€@Repositoryç­‰æ´¾ç”Ÿçš„æ³¨è§£ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserHandler</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.wsh.injectbean.method_02"</span>)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬äºŒç§æ–¹å¼ï¼š ä½¿ç”¨<span class="doctag">@Component</span>æ³¨è§£ + <span class="doctag">@ComponentScan</span>åŒ…æ‰«ææ–¹å¼</span></span><br><span class="line"><span class="comment"> * åŒ…æ‹¬<span class="doctag">@Controler</span>ã€<span class="doctag">@Service</span>ã€<span class="doctag">@Repository</span>ç­‰æ´¾ç”Ÿçš„æ³¨è§£ã€‚</span></span><br><span class="line"><span class="comment"> * ä¸ºäº†è§£å†³beanå¤ªå¤šæ—¶ï¼Œxmlæ–‡ä»¶è¿‡å¤§ï¼Œä»è€Œå¯¼è‡´è†¨èƒ€ä¸å¥½ç»´æŠ¤çš„é—®é¢˜ã€‚åœ¨spring2.5ä¸­å¼€å§‹æ”¯æŒï¼š<span class="doctag">@Component</span>ã€<span class="doctag">@Repository</span>ã€<span class="doctag">@Service</span>ã€<span class="doctag">@Controller</span>ç­‰æ³¨è§£å®šä¹‰beanã€‚</span></span><br><span class="line"><span class="comment"> * å…¶å®æœ¬è´¨ä¸Š<span class="doctag">@Controler</span>ã€<span class="doctag">@Service</span>ã€<span class="doctag">@Repository</span>ä¹Ÿæ˜¯ä½¿ç”¨<span class="doctag">@Component</span>æ³¨è§£ä¿®é¥°çš„ã€‚</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * é€šå¸¸æƒ…å†µä¸‹ï¼š</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Controller</span>ï¼šä¸€èˆ¬ç”¨åœ¨æ§åˆ¶å±‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Service</span>ï¼šä¸€èˆ¬ç”¨åœ¨ä¸šåŠ¡å±‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Repository</span>ï¼šä¸€èˆ¬ç”¨åœ¨æŒä¹…å±‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Component</span>ï¼šä¸€èˆ¬ç”¨åœ¨å…¬å…±ç»„ä»¶ä¸Š</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"userDao"</span>));</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"userService"</span>));</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"userController"</span>));</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"userHandler"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€ç¬¬ä¸‰ç§æ–¹å¼ï¼š-Configuration-Beanæ–¹å¼"><a href="#å››ã€ç¬¬ä¸‰ç§æ–¹å¼ï¼š-Configuration-Beanæ–¹å¼" class="headerlink" title="å››ã€ç¬¬ä¸‰ç§æ–¹å¼ï¼š@Configuration + @Beanæ–¹å¼"></a>å››ã€ç¬¬ä¸‰ç§æ–¹å¼ï¼š@Configuration + @Beanæ–¹å¼</h2><p>è¿™ç§æ–¹å¼å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ–¹å¼ä¹‹ä¸€ï¼Œ@Configurationç”¨æ¥å£°æ˜ä¸€ä¸ªé…ç½®ç±»ï¼Œç„¶åä½¿ç”¨ @Bean æ³¨è§£å£°æ˜ä¸€ä¸ªbeanï¼Œå°†å…¶åŠ å…¥åˆ°Springå®¹å™¨ä¸­ã€‚</p>
<p><strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹ç±»åº“ä¸­çš„å·¥å…·ç±»çš„è¯ï¼Œæˆ‘ä»¬éƒ½æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼æ³¨å†ŒBeanã€‚</strong></p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Student <span class="title">student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Student();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸‰ç§æ–¹å¼ï¼š<span class="doctag">@Configuration</span> + <span class="doctag">@Bean</span>æ–¹å¼</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹ç±»åº“ä¸­çš„å·¥å…·ç±»çš„è¯ï¼Œæˆ‘ä»¬éƒ½æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼æ³¨å†ŒBean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"student"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€ç¬¬å››ç§æ–¹å¼ï¼šFactoryBeanæ–¹å¼"><a href="#äº”ã€ç¬¬å››ç§æ–¹å¼ï¼šFactoryBeanæ–¹å¼" class="headerlink" title="äº”ã€ç¬¬å››ç§æ–¹å¼ï¼šFactoryBeanæ–¹å¼"></a>äº”ã€ç¬¬å››ç§æ–¹å¼ï¼šFactoryBeanæ–¹å¼</h2><p>FactoryBeanæ˜¯ä¸€ä¸ªBeanï¼Œå®ƒå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰Beançš„åˆ›å»ºï¼Œä¸»è¦æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>getObject()ï¼šè‡ªå®šä¹‰Beanå¦‚ä½•åˆ›å»ºï¼›</li>
<li>getObjectType()ï¼šè¦æ³¨å†Œçš„Beançš„ç±»å‹ï¼›</li>
<li>isSingleton()ï¼šæ˜¯å¦å•ä¾‹ï¼›</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">		<span class="keyword">return</span> User.class;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.wsh.injectbean.method_04"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬å››ç§æ–¹å¼ï¼šä½¿ç”¨FactoryBean</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * FactoryBeanåœ¨ä¸€äº›æ¡†æ¶æ•´åˆä¸Šç”¨çš„æ¯”è¾ƒå¤šï¼Œå¦‚Mybatisä¸Springçš„æ•´åˆä¸­ï¼šMapperFactoryBeanã€SqlSessionFactoryBeanç­‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"userFactoryBean"</span>));</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"&amp;userFactoryBean"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€ç¬¬äº”ç§æ–¹å¼ï¼š-Importæ–¹å¼"><a href="#å…­ã€ç¬¬äº”ç§æ–¹å¼ï¼š-Importæ–¹å¼" class="headerlink" title="å…­ã€ç¬¬äº”ç§æ–¹å¼ï¼š@Importæ–¹å¼"></a>å…­ã€ç¬¬äº”ç§æ–¹å¼ï¼š@Importæ–¹å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Import</span>(&#123;Student.class&#125;)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬äº”ç§æ–¹å¼ï¼š<span class="doctag">@Import</span>æ–¹å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">		<span class="keyword">for</span> (String beanDefinitionName : applicationContext.getBeanDefinitionNames()) &#123;</span><br><span class="line">			System.out.println(beanDefinitionName);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"================"</span>);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"com.wsh.injectbean.method_05.Student"</span>));</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"student"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€ç¬¬å…­ç§æ–¹å¼ï¼š-Import-ImportSelectoræ–¹å¼"><a href="#ä¸ƒã€ç¬¬å…­ç§æ–¹å¼ï¼š-Import-ImportSelectoræ–¹å¼" class="headerlink" title="ä¸ƒã€ç¬¬å…­ç§æ–¹å¼ï¼š@Import + ImportSelectoræ–¹å¼"></a>ä¸ƒã€ç¬¬å…­ç§æ–¹å¼ï¼š@Import + ImportSelectoræ–¹å¼</h2><p>é¦–å…ˆä»‹ç»ä¸€ä¸‹ImportSelectoræ¥å£çš„å¥½å¤„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ol>
<li><p>æŠŠæŸä¸ªåŠŸèƒ½çš„ç›¸å…³ç±»æ”¾åˆ°ä¸€èµ·ï¼Œæ–¹é¢ç®¡ç†å’Œç»´æŠ¤ã€‚</p>
</li>
<li><p>é‡å†™selectImportsæ–¹æ³•æ—¶ï¼Œèƒ½å¤Ÿæ ¹æ®æ¡ä»¶åˆ¤æ–­æŸäº›ç±»æ˜¯å¦éœ€è¦è¢«å®ä¾‹åŒ–ï¼Œæˆ–è€…æŸä¸ªæ¡ä»¶å®ä¾‹åŒ–è¿™äº›beanï¼Œå…¶ä»–çš„æ¡ä»¶å®ä¾‹åŒ–é‚£äº›beanç­‰ï¼Œæˆ‘ä»¬èƒ½å¤Ÿéå¸¸çµæ´»çš„å®šåˆ¶åŒ–beançš„å®ä¾‹åŒ–ã€‚</p>
</li>
</ol>
<p>è¿™ç§æ–¹å¼æˆ‘ä»¬éœ€è¦å®ç°ImportSelectoræ¥å£ï¼Œå¹¶é‡å†™selectImports()æ–¹æ³•ï¼Œç„¶åå°†æˆ‘ä»¬è¦å¯¼å…¥çš„ç±»çš„å…¨é™å®šåå†™åœ¨é‡Œé¢å³å¯ã€‚</p>
<p><strong>æŒ‡å®šéœ€è¦å®šä¹‰beançš„ç±»åï¼Œæ³¨æ„è¦åŒ…å«å®Œæ•´è·¯å¾„ï¼Œè€Œéç›¸å¯¹è·¯å¾„ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyImportSelector</span> <span class="keyword">implements</span> <span class="title">ImportSelector</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">// æŒ‡å®šéœ€è¦å®šä¹‰beançš„ç±»åï¼Œæ³¨æ„è¦åŒ…å«å®Œæ•´è·¯å¾„ï¼Œè€Œéç›¸å¯¹è·¯å¾„</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">"com.wsh.injectbean.method_06.Product"</span>, <span class="string">"com.wsh.injectbean.method_06.User"</span>&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Import</span>(&#123;MyImportSelector.class&#125;)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬å…­ç§æ–¹å¼ï¼š<span class="doctag">@Import</span> + ImportSelectoræ–¹å¼</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ImportSelectoræ¥å£çš„å¥½å¤„ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 1.æŠŠæŸä¸ªåŠŸèƒ½çš„ç›¸å…³ç±»æ”¾åˆ°ä¸€èµ·ï¼Œæ–¹é¢ç®¡ç†å’Œç»´æŠ¤ã€‚</span></span><br><span class="line"><span class="comment"> * 2.é‡å†™selectImportsæ–¹æ³•æ—¶ï¼Œèƒ½å¤Ÿæ ¹æ®æ¡ä»¶åˆ¤æ–­æŸäº›ç±»æ˜¯å¦éœ€è¦è¢«å®ä¾‹åŒ–ï¼Œæˆ–è€…æŸä¸ªæ¡ä»¶å®ä¾‹åŒ–è¿™äº›beanï¼Œå…¶ä»–çš„æ¡ä»¶å®ä¾‹åŒ–é‚£äº›beanç­‰,æˆ‘ä»¬èƒ½å¤Ÿéå¸¸çµæ´»çš„å®šåˆ¶åŒ–beançš„å®ä¾‹åŒ–ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">		<span class="keyword">for</span> (String beanDefinitionName : applicationContext.getBeanDefinitionNames()) &#123;</span><br><span class="line">			System.out.println(beanDefinitionName);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"================"</span>);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"com.wsh.injectbean.method_06.Product"</span>));</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(applicationContext.getBean(<span class="string">"product"</span>));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"================"</span>);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"com.wsh.injectbean.method_06.User"</span>));</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(applicationContext.getBean(<span class="string">"user"</span>));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€ç¬¬ä¸ƒç§æ–¹å¼ï¼š-Import-ImportBeanDefinitionRegistraræ–¹å¼"><a href="#å…«ã€ç¬¬ä¸ƒç§æ–¹å¼ï¼š-Import-ImportBeanDefinitionRegistraræ–¹å¼" class="headerlink" title="å…«ã€ç¬¬ä¸ƒç§æ–¹å¼ï¼š@Import + ImportBeanDefinitionRegistraræ–¹å¼?"></a>å…«ã€ç¬¬ä¸ƒç§æ–¹å¼ï¼š@Import + ImportBeanDefinitionRegistraræ–¹å¼?</h2><p>è¿™ç§æ–¹å¼æˆ‘ä»¬éœ€è¦å®ç°ImportBeanDefinitionRegistraræ¥å£ï¼Œå¹¶é‡å†™registerBeanDefinitions()æ–¹æ³•ï¼Œç„¶åå®šä¹‰æˆ‘ä»¬éœ€è¦æ³¨å†Œçš„Beançš„å®šä¹‰ä¿¡æ¯ï¼Œç„¶åregistry.registerBeanDefinition()æ–¹æ³•æ³¨å†Œå³å¯ã€‚<strong>è¿™ç§æ–¹å¼æ¯”ImportSelectoræ›´åŠ çµæ´»ï¼Œå¯ä»¥è‡ªå®šä¹‰beançš„åç§°ã€ä½œç”¨åŸŸç­‰å¾ˆå¤šå‚æ•°ã€‚</strong> åƒæˆ‘ä»¬å¸¸è§çš„Spring Cloudä¸­çš„Feignï¼Œå°±ä½¿ç”¨äº†ImportBeanDefinitionRegistrarï¼Œå…·ä½“å¯ä»¥å‚è€ƒFeignClientsRegistrarç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// å¯ä»¥è‡ªå®šä¹‰beançš„åç§°ã€ä½œç”¨åŸŸç­‰å¾ˆå¤šå‚æ•°</span></span><br><span class="line">		registry.registerBeanDefinition(<span class="string">"user"</span>, <span class="keyword">new</span> RootBeanDefinition(User.class));</span><br><span class="line">		RootBeanDefinition rootBeanDefinition = <span class="keyword">new</span> RootBeanDefinition(Product.class);</span><br><span class="line">		rootBeanDefinition.setScope(BeanDefinition.SCOPE_SINGLETON);</span><br><span class="line">		registry.registerBeanDefinition(<span class="string">"product"</span>, rootBeanDefinition);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Import</span>(&#123;CustomImportBeanDefinitionRegistrar.class&#125;)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸ƒç§æ–¹å¼ï¼š<span class="doctag">@Import</span> + ImportBeanDefinitionRegistraræ–¹å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å¯ä»¥è‡ªå®šä¹‰beançš„åç§°ã€ä½œç”¨åŸŸç­‰å¾ˆå¤šå‚æ•°, åƒæˆ‘ä»¬å¸¸è§çš„Spring Cloudä¸­çš„Feignï¼Œå°±ä½¿ç”¨äº†ImportBeanDefinitionRegistrar</span></span><br><span class="line"><span class="comment"> * class FeignClientsRegistrar implements ImportBeanDefinitionRegistrar, ResourceLoaderAware, EnvironmentAware &#123;</span></span><br><span class="line"><span class="comment"> * 		public void registerBeanDefinitions(AnnotationMetadata metadata, BeanDefinitionRegistry registry) &#123;</span></span><br><span class="line"><span class="comment"> *         this.registerDefaultConfiguration(metadata, registry);</span></span><br><span class="line"><span class="comment"> *         this.registerFeignClients(metadata, registry);</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"product"</span>));</span><br><span class="line">		System.out.println(applicationContext.getBean(<span class="string">"user"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2022/12/18/Autowired&amp;Resource/">Springä¾èµ–æ³¨å…¥æ³¨è§£@Resourceå’Œ@Autowired</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-12-18</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Spring/">Spring</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span><div class="content"><script src="/assets/js/APlayer.min.js"> </script><h2 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h2><p><code>@Resource</code>å’Œ<code>@Autowired</code>æ³¨è§£éƒ½å¯ä»¥åœ¨<strong>Spring Framework</strong>åº”ç”¨ä¸­è¿›è¡Œå£°æ˜å¼çš„ä¾èµ–æ³¨å…¥ã€‚è€Œä¸”é¢è¯•ä¸­ç»å¸¸æ¶‰åŠåˆ°è¿™ä¸¤ä¸ªæ³¨è§£çš„çŸ¥è¯†ç‚¹ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å®ƒä»¬ã€‚</p>
<h2 id="2-Resource"><a href="#2-Resource" class="headerlink" title="2. @Resource"></a>2. @Resource</h2><p>å…¨ç§°<code>javax.annotation.Resource</code>,å®ƒå±äº<strong>JSR-250</strong>è§„èŒƒçš„ä¸€ä¸ªæ³¨è§£ï¼ŒåŒ…å«<strong>Jakarta EE</strong>ï¼ˆ<strong>J2EE</strong>ï¼‰ä¸­ã€‚<strong>Spring</strong>æä¾›äº†å¯¹è¯¥æ³¨è§£çš„æ”¯æŒã€‚æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸€ä¸‹è¯¥æ³¨è§£çš„è§„åˆ™ã€‚</p>
<p><strong>è¯¥æ³¨è§£ä½¿ç”¨åœ¨æˆå‘˜å±æ€§å’Œsetteræ–¹æ³•ä¸Šã€‚é»˜è®¤æƒ…å†µä¸‹<code>@Resource</code>æŒ‰ç…§åç§°æ³¨å…¥ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å£°æ˜åç§°åˆ™æŒ‰ç…§å˜é‡åç§°æˆ–è€…æ–¹æ³•ä¸­å¯¹åº”çš„å‚æ•°åç§°è¿›è¡Œæ³¨å…¥ã€‚</strong></p>
<p><img src="https://i.328888.xyz/2022/12/18/4vdxb.png" alt="4vdxb.png"></p>
<p>@Resourceæ³¨è§£ä¹Ÿå¯ä»¥å®Œæˆéç®€å•ç±»å‹æ³¨å…¥ã€‚é‚£å®ƒå’Œ@Autowiredæ³¨è§£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ul>
<li>@Resourceæ³¨è§£æ˜¯JDKæ‰©å±•åŒ…ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å±äºJDKçš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥è¯¥æ³¨è§£æ˜¯æ ‡å‡†æ³¨è§£ï¼Œæ›´åŠ å…·æœ‰é€šç”¨æ€§ã€‚(JSR-250æ ‡å‡†ä¸­åˆ¶å®šçš„æ³¨è§£ç±»å‹ã€‚JSRæ˜¯Javaè§„èŒƒææ¡ˆã€‚)</li>
<li>@Autowiredæ³¨è§£æ˜¯Springæ¡†æ¶è‡ªå·±çš„ã€‚</li>
<li><strong>@Resourceæ³¨è§£é»˜è®¤æ ¹æ®åç§°è£…é…byNameï¼ŒæœªæŒ‡å®šnameæ—¶ï¼Œä½¿ç”¨å±æ€§åä½œä¸ºnameã€‚é€šè¿‡nameæ‰¾ä¸åˆ°çš„è¯ä¼šè‡ªåŠ¨å¯åŠ¨é€šè¿‡ç±»å‹byTypeè£…é…ã€‚</strong></li>
<li><strong>@Autowiredæ³¨è§£é»˜è®¤æ ¹æ®ç±»å‹è£…é…byTypeï¼Œå¦‚æœæƒ³æ ¹æ®åç§°è£…é…ï¼Œéœ€è¦é…åˆ@Qualifieræ³¨è§£ä¸€èµ·ç”¨ã€‚</strong></li>
<li>@Resourceæ³¨è§£ç”¨åœ¨å±æ€§ä¸Šã€setteræ–¹æ³•ä¸Šã€‚</li>
<li>@Autowiredæ³¨è§£ç”¨åœ¨å±æ€§ä¸Šã€setteræ–¹æ³•ä¸Šã€æ„é€ æ–¹æ³•ä¸Šã€æ„é€ æ–¹æ³•å‚æ•°ä¸Šã€‚</li>
</ul>
<p>@Resourceæ³¨è§£å±äºJDKæ‰©å±•åŒ…ï¼Œæ‰€ä»¥ä¸åœ¨JDKå½“ä¸­ï¼Œéœ€è¦é¢å¤–å¼•å…¥ä»¥ä¸‹ä¾èµ–ï¼šã€<strong>å¦‚æœæ˜¯JDK8çš„è¯ä¸éœ€è¦é¢å¤–å¼•å…¥ä¾èµ–ã€‚é«˜äºJDK11æˆ–ä½äºJDK8éœ€è¦å¼•å…¥ä»¥ä¸‹ä¾èµ–ã€‚</strong>ã€‘</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœä½ æ˜¯Spring6+ç‰ˆæœ¬è¯·ä½¿ç”¨è¿™ä¸ªä¾èµ–ğŸ‘‡</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.annotation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.annotation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœä½ æ˜¯spring5-ç‰ˆæœ¬è¯·ä½¿ç”¨è¿™ä¸ªä¾èµ–ğŸ‘‡</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.annotation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.annotation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Autowired"><a href="#3-Autowired" class="headerlink" title="3. @Autowired"></a>3. @Autowired</h2><ul>
<li><p>ç¬¬ä¸€ç‚¹æ³¨æ„ï¼šè¯¥æ³¨è§£å¯ä»¥æ ‡æ³¨åœ¨å“ªé‡Œï¼Ÿ</p>
</li>
<li><ul>
<li>æ„é€ æ–¹æ³•ä¸Š</li>
<li>æ–¹æ³•ä¸Š</li>
<li>å½¢å‚ä¸Š</li>
<li>å±æ€§ä¸Š</li>
<li>æ³¨è§£ä¸Š</li>
</ul>
</li>
<li><p>ç¬¬äºŒç‚¹æ³¨æ„ï¼šè¯¥æ³¨è§£æœ‰ä¸€ä¸ªrequiredå±æ€§ï¼Œé»˜è®¤å€¼æ˜¯trueï¼Œè¡¨ç¤ºåœ¨æ³¨å…¥çš„æ—¶å€™è¦æ±‚è¢«æ³¨å…¥çš„Beanå¿…é¡»æ˜¯å­˜åœ¨çš„ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ¥é”™ã€‚å¦‚æœrequiredå±æ€§è®¾ç½®ä¸ºfalseï¼Œè¡¨ç¤ºæ³¨å…¥çš„Beanå­˜åœ¨æˆ–è€…ä¸å­˜åœ¨éƒ½æ²¡å…³ç³»ï¼Œå­˜åœ¨çš„è¯å°±æ³¨å…¥ï¼Œä¸å­˜åœ¨çš„è¯ï¼Œä¹Ÿä¸æŠ¥é”™ã€‚</p>
</li>
</ul>
<p><img src="https://i.328888.xyz/2022/12/18/4vGld.png" alt="4vGld.png"></p>
<ul>
<li>@Autowiredæ³¨è§£å¯ä»¥å‡ºç°åœ¨ï¼šå±æ€§ä¸Šã€æ„é€ æ–¹æ³•ä¸Šã€æ„é€ æ–¹æ³•çš„å‚æ•°ä¸Šã€setteræ–¹æ³•ä¸Šã€‚</li>
<li>å½“å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•åªæœ‰ä¸€ä¸ªï¼Œ@Autowiredæ³¨è§£å¯ä»¥çœç•¥ã€‚</li>
<li>@Autowiredæ³¨è§£é»˜è®¤æ ¹æ®ç±»å‹æ³¨å…¥ã€‚å¦‚æœè¦æ ¹æ®åç§°æ³¨å…¥çš„è¯ï¼Œéœ€è¦é…åˆ@Qualifieræ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚</li>
</ul>
<h2 id="4-ä½¿ç”¨ç»†èŠ‚å’Œå…¶ä»–æ³¨æ„äº‹é¡¹"><a href="#4-ä½¿ç”¨ç»†èŠ‚å’Œå…¶ä»–æ³¨æ„äº‹é¡¹" class="headerlink" title="4. ä½¿ç”¨ç»†èŠ‚å’Œå…¶ä»–æ³¨æ„äº‹é¡¹"></a>4. ä½¿ç”¨ç»†èŠ‚å’Œå…¶ä»–æ³¨æ„äº‹é¡¹</h2><p>è´Ÿè´£å£°æ˜Beançš„æ³¨è§£ï¼Œå¸¸è§çš„åŒ…æ‹¬å››ä¸ªï¼š</p>
<ul>
<li>@Component</li>
<li>@Controller</li>
<li>@Service</li>
<li>@Repository</li>
</ul>
<p>æ³¨æ„å¯ä»¥åœ¨å£°æ˜Beançš„æ³¨è§£ä¸­è®¾ç½®Beançš„<strong>name</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"xxxBean"</span>)</span><br></pre></td></tr></table></figure>

<p><strong>é—®ï¼šå¦‚æœæŠŠvalueå±æ€§å½»åº•å»æ‰ï¼Œspringä¼šè¢«Beanè‡ªåŠ¨å–åå—ï¼Ÿ</strong></p>
<p><strong>ç­”ï¼šä¼šçš„ã€‚å¹¶ä¸”é»˜è®¤åå­—çš„è§„å¾‹æ˜¯ï¼š<u>Beanç±»åé¦–å­—æ¯å°å†™å³å¯</u>ã€‚</strong></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2022/12/16/SSH related/">Linux ssh</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-12-16</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/ssh/">ssh</a></span><div class="content"><script src="/assets/js/APlayer.min.js"> </script><h2 id="1-åˆè§SSH"><a href="#1-åˆè§SSH" class="headerlink" title="1. åˆè§SSH"></a>1. åˆè§SSH</h2><p>SSHæ˜¯ä¸€ç§åè®®æ ‡å‡†ï¼Œå…¶ç›®çš„æ˜¯å®ç°å®‰å…¨è¿œç¨‹ç™»å½•ä»¥åŠå…¶å®ƒå®‰å…¨ç½‘ç»œæœåŠ¡ã€‚</p>
<ul>
<li>SSHä»…ä»…æ˜¯ä¸€åè®®æ ‡å‡†ï¼Œå…¶å…·ä½“çš„å®ç°æœ‰å¾ˆå¤šï¼Œæ—¢æœ‰å¼€æºå®ç°çš„OpenSSHï¼Œä¹Ÿæœ‰å•†ä¸šå®ç°æ–¹æ¡ˆã€‚ä½¿ç”¨èŒƒå›´æœ€å¹¿æ³›çš„å½“ç„¶æ˜¯å¼€æºå®ç°OpenSSHã€‚</li>
</ul>
<h2 id="2-SSHå·¥ä½œåŸç†"><a href="#2-SSHå·¥ä½œåŸç†" class="headerlink" title="2. SSHå·¥ä½œåŸç†"></a>2. SSHå·¥ä½œåŸç†</h2><p>åœ¨è®¨è®ºSSHçš„åŸç†å’Œä½¿ç”¨å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ†æä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦SSHï¼Ÿ</p>
<p>ä»1.1èŠ‚SSHçš„å®šä¹‰ä¸­å¯ä»¥çœ‹å‡ºï¼ŒSSHå’Œtelnetã€ftpç­‰åè®®ä¸»è¦çš„åŒºåˆ«åœ¨äºå®‰å…¨æ€§ã€‚è¿™å°±å¼•å‡ºä¸‹ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•å®ç°æ•°æ®çš„å®‰å…¨å‘¢ï¼Ÿé¦–å…ˆæƒ³åˆ°çš„å®ç°æ–¹æ¡ˆè‚¯å®šæ˜¯å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚åŠ å¯†çš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>å¯¹ç§°åŠ å¯†ï¼ˆä¹Ÿç§°ä¸ºç§˜é’¥åŠ å¯†ï¼‰</li>
<li>éå¯¹ç§°åŠ å¯†ï¼ˆä¹Ÿç§°å…¬é’¥åŠ å¯†ï¼‰</li>
</ul>
<p>æ‰€è°“å¯¹ç§°åŠ å¯†ï¼ŒæŒ‡åŠ å¯†è§£å¯†ä½¿ç”¨åŒä¸€å¥—ç§˜é’¥ã€‚å¯¹ç§°åŠ å¯†çš„åŠ å¯†å¼ºåº¦é«˜ï¼Œå¾ˆéš¾ç ´è§£ã€‚ä½†æ˜¯åœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­ä¸å¾—ä¸é¢ä¸´ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šå¦‚ä½•å®‰å…¨çš„ä¿å­˜å¯†é’¥å‘¢ï¼Ÿå°¤å…¶æ˜¯è€ƒè™‘åˆ°æ•°é‡åºå¤§çš„Clientç«¯ï¼Œå¾ˆéš¾ä¿è¯å¯†é’¥ä¸è¢«æ³„éœ²ã€‚ä¸€æ—¦ä¸€ä¸ªClientç«¯çš„å¯†é’¥è¢«çªƒæ®ï¼Œé‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§ä¹Ÿå°±ä¸å¤å­˜åœ¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéå¯¹ç§°åŠ å¯†åº”è¿è€Œç”Ÿã€‚</p>
<p>éå¯¹ç§°åŠ å¯†æœ‰ä¸¤ä¸ªå¯†é’¥ï¼šâ€œå…¬é’¥â€å’Œâ€œç§é’¥â€ã€‚ä¸¤ä¸ªå¯†é’¥çš„ç‰¹æ€§ï¼šå…¬é’¥åŠ å¯†åçš„å¯†æ–‡ï¼Œåªèƒ½é€šè¿‡å¯¹åº”çš„ç§é’¥è¿›è¡Œè§£å¯†ã€‚è€Œé€šè¿‡å…¬é’¥æ¨ç†å‡ºç§é’¥çš„å¯èƒ½æ€§å¾®ä¹å…¶å¾®ã€‚</p>
<p><img src="assets/1.png" alt></p>
<p><strong>è¿™æ ·å°±ä¸€å®šå®‰å…¨äº†å—ï¼Ÿ</strong><br>ä¸Šè¿°æµç¨‹ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šClientç«¯å¦‚ä½•ä¿è¯æ¥å—åˆ°çš„å…¬é’¥å°±æ˜¯ç›®æ ‡Serverç«¯çš„ï¼Ÿï¼Œå¦‚æœä¸€ä¸ªæ”»å‡»è€…ä¸­é€”æ‹¦æˆªClientçš„ç™»å½•è¯·æ±‚ï¼Œå‘å…¶å‘é€è‡ªå·±çš„å…¬é’¥ï¼ŒClientç«¯ç”¨æ”»å‡»è€…çš„å…¬é’¥è¿›è¡Œæ•°æ®åŠ å¯†ã€‚æ”»å‡»è€…æ¥æ”¶åˆ°åŠ å¯†ä¿¡æ¯åå†ç”¨è‡ªå·±çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œä¸å°±çªƒå–äº†Clientçš„ç™»å½•ä¿¡æ¯äº†å—ï¼Ÿè¿™å°±æ˜¯æ‰€è°“çš„ä¸­é—´äººæ”»å‡»</p>
<hr>
<p>åœ¨ä¸Šé¢ä»‹ç»çš„ç™»å½•æµç¨‹ä¸­å¯ä»¥å‘ç°ï¼Œæ¯æ¬¡ç™»å½•éƒ½éœ€è¦è¾“å…¥å¯†ç ï¼Œå¾ˆéº»çƒ¦ã€‚SSHæä¾›äº†å¦å¤–ä¸€ç§å¯ä»¥å…å»è¾“å…¥å¯†ç è¿‡ç¨‹çš„ç™»å½•æ–¹å¼ï¼šå…¬é’¥ç™»å½•ã€‚æµç¨‹å¦‚ä¸‹ï¼š<br><img src="assets/2.png" alt></p>
<ol>
<li>Clientå°†è‡ªå·±çš„å…¬é’¥å­˜æ”¾åœ¨Serverä¸Šï¼Œè¿½åŠ åœ¨æ–‡ä»¶authorized_keysä¸­ã€‚</li>
<li>Serverç«¯æ¥æ”¶åˆ°Clientçš„è¿æ¥è¯·æ±‚åï¼Œä¼šåœ¨authorized_keysä¸­åŒ¹é…åˆ°Clientçš„å…¬é’¥pubKeyï¼Œå¹¶ç”Ÿæˆéšæœºæ•°Rï¼Œç”¨Clientçš„å…¬é’¥å¯¹è¯¥éšæœºæ•°è¿›è¡ŒåŠ å¯†å¾—åˆ°pubKey(R)ï¼Œç„¶åå°†åŠ å¯†åä¿¡æ¯å‘é€ç»™Clientã€‚</li>
<li>Clientç«¯é€šè¿‡ç§é’¥è¿›è¡Œè§£å¯†å¾—åˆ°éšæœºæ•°Rï¼Œç„¶åå¯¹éšæœºæ•°Rå’Œæœ¬æ¬¡ä¼šè¯çš„SessionKeyåˆ©ç”¨MD5ç”Ÿæˆæ‘˜è¦Digest1ï¼Œå‘é€ç»™Serverç«¯ã€‚</li>
<li>Serverç«¯ä¼šä¹Ÿä¼šå¯¹Rå’ŒSessionKeyåˆ©ç”¨åŒæ ·æ‘˜è¦ç®—æ³•ç”ŸæˆDigest2ã€‚</li>
<li>Serverç«¯ä¼šæœ€åæ¯”è¾ƒDigest1å’ŒDigest2æ˜¯å¦ç›¸åŒï¼Œå®Œæˆè®¤è¯è¿‡ç¨‹ã€‚</li>
</ol>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/43/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><span class="page-number current">44</span><a class="page-number" href="/page/45/">45</a><span class="space">&hellip;</span><a class="page-number" href="/page/76/">76</a><a class="extend next" rel="next" href="/page/45/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://pic.syst.eu.org/WechatIMG8673.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2015 - 2023 By GeYu</div><div class="framework-info"><span>é©±åŠ¨ - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Enjoy the cyber world!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>